#خطاها در پایتون

به طور کلی در هر زبان برنامه نویسی، دو نوع خطای دستوری و زمان‌ اجرا وجود دارد که پایتون هم از این قاعده مستثنا نیست. در این بخش این دو نوع را شرح می‌دهیم.

خطای نحوی (Syntax error)
فرض کنید یک دستور را به طریقی اشتباه نوشته باشیم و Interpreter نتواند آن را بفهمد. در این صورت خطایی را بر می‌گرداند که مشخص می کند برنامه ما Syntax error دارد. برای مثال کد زیر را در نظر بگیرید که بعد از دستور while کاراکتر : نوشته نشده و Interpreter به ما خطا داده است.

```angular2html
>>> while True print('Hello World!')
  File "<stdin>", line 1
    while True print('Hello World!')
                   ^
SyntaxError: invalid syntax 
```

‍‍‍‍‍ برای جلوگیری از بروز این مشکلات بهتر است از IDEهای معرفی‌شده در فصل قبل استفاده کنید. این محیط‌ها با پیشنهاد راه‌حل برای برطرف کردن مشکل، کار دیباگ‌ (یافتن و برطرف کردن اشکالات) را ساده‌تر می‌کنند.

نوع دیگری از خطاهای نحوی در پایتون Indentation Error است. این خطا در صورتی رخ می‌دهد که محدوه‌بندی نادرست باشد. مفسر قبل از اجرای برنامه، درستی محدوده‌ها را بررسی و سپس شروع به اجرای برنامه می‌کند. برای مثال به کد زیر توجه کنید :

```angular2html
print("salam")
    x = 2
print(x)
```

با اجرای این کد مفسر خروجی زیر را خواهد داد :

```angular2html
  File "a.py", line 2
    x = 2
    ^
IndentationError: unexpected indent
```

همان طور که می‌بینید دستور print در خط اول هم اجرا نشده و برنامه همان ابتدا خطا داده‌است.

استثنا (Exception)
حتی اگر در برنامه، Syntax مورد نظر پایتون را رعایت کرده باشیم باز هم ممکن‌ است که برنامه با خطا مواجه‌شود. این نوع خطاها (که به شکل دستور ربط ندارند) را Exception می‌گویند. سه نمونه از این دسته خطاها که ممکن است زیاد به آن‌ها برخورد کنید، در زیر آمده‌اند :

```angular2html
>>> x = 1/0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ZeroDivisionError: division by zero
>>> print(y)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'y' is not defined
>>> z = int('salam')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: 'salam'
```

به طور کلی ساختار خروجی استثناها توسط Interpreter به این ترتیب است که ابتدا مشخص می‌کند که در کدام بخش برنامه این خطا رخ‌ داده و stack traceback برنامه در آن زمان به چه شکل بوده‌است. در خط آخر نیز نوع استثنا به همراه یک توضیح کوتاه بعنوان دلیل رخ‌دادن خطا نمایش داده خواهد شد.

مدیریت استثناها
فرض کنید، می‌خواهیم کاری کنیم تا جلوی خطا دادن برنامه‌ را گرفته و خودمان خطا را مدیریت کنیم و حتی از این که بخشی از برنامه خطا می‌دهد استفاده کنیم تا کدی تمیزتر و با پیاده سازی راحت‌تر بنویسیم. برای این کار، پایتون دو دستور try و except را در اختیار ما گذارد که ممکن است مشابهش را در زبان‌های دیگر دیده‌ باشید.

برای مثال، فرض کنید می خواهیم برنامه ای بنویسیم که با دریافت یک رشته از ورودی تشخیص دهد که این رشته به صورت عددی است یا نه. در این صورت ما می توانیم به کمک دستورهای try و except کد زیر را بزنیم :

```angular2html
try:
    x = int(input())
    print("It's a number!")
except:
    print("It's just a string!")
```

شیوه کار دستور try به این صورت است که پس از نوشتن آن، در Scope بعد از آن دستوراتی که می خواهیم انجام شوند را می‌نویسیم. حال اگر در هنگام اجرای یکی از دستورات موجود در این محدوده، استثنایی رخ دهد برنامه از محدوده فعلی خارج شده و دستورات Scope ای که بعد از نوشتن except وجود دارد، اجرا می‌شود.

برای مثال در کد بالا ابتدا سعی می‌‌شود مقدار ورودی به int تبدیل شود. اگر استثنایی رخ ندهد در آن صورت عبارت It's a number! چاپ می شود؛ در غیر این صورت به Scope بعد از except رفته و عبارت It's just a string! چاپ می‌شود.

البته مدیریت Exceptionها شیوه‌های دیگری نیز دارد که ما در این جا به ساده ترین شکل آن پرداختیم.